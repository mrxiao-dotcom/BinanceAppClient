<Window x:Class="BinanceApps.WPF.DataValidationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="数据验证 - {0}" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 标题和基本信息 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock x:Name="txtTitle" Text="数据验证" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
            <TextBlock x:Name="txtSummary" Text="筛选条件摘要" FontSize="12" Foreground="Gray"/>
        </StackPanel>
        
        <!-- 统计信息面板 -->
        <GroupBox Grid.Row="1" Header="统计信息" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Margin="10">
                    <TextBlock Text="最新收盘价" FontWeight="Bold"/>
                    <TextBlock x:Name="txtLatestClose" Text="0.00000000" FontSize="14"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Margin="10">
                    <TextBlock Text="最近X天最高价" FontWeight="Bold"/>
                    <TextBlock x:Name="txtRecentHigh" Text="0.00000000" FontSize="14"/>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Margin="10">
                    <TextBlock Text="最新成交额" FontWeight="Bold"/>
                    <TextBlock x:Name="txtLatestVolume" Text="0.00" FontSize="14"/>
                </StackPanel>
                
                <StackPanel Grid.Column="3" Margin="10">
                    <TextBlock Text="成交额倍数" FontWeight="Bold"/>
                    <TextBlock x:Name="txtVolumeMultiplier" Text="0.00" FontSize="14"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        
        <!-- 主要内容区域 -->
        <TabControl Grid.Row="2" Margin="0,0,0,10">
            
            <!-- K线数据标签页 -->
            <TabItem Header="K线数据">
                <DataGrid x:Name="dgKlineData" 
                          AutoGenerateColumns="False" 
                          IsReadOnly="True"
                          CanUserResizeRows="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="日期" Binding="{Binding Date, StringFormat=yyyy-MM-dd}" Width="100"/>
                        <DataGridTextColumn Header="开盘价" Binding="{Binding OpenPrice, StringFormat=F8}" Width="100"/>
                        <DataGridTextColumn Header="最高价" Binding="{Binding HighPrice, StringFormat=F8}" Width="100"/>
                        <DataGridTextColumn Header="最低价" Binding="{Binding LowPrice, StringFormat=F8}" Width="100"/>
                        <DataGridTextColumn Header="收盘价" Binding="{Binding ClosePrice, StringFormat=F8}" Width="100"/>
                        <DataGridTextColumn Header="成交量" Binding="{Binding Volume, StringFormat=F2}" Width="100"/>
                        <DataGridTextColumn Header="成交额" Binding="{Binding QuoteVolume, StringFormat=F2}" Width="120"/>
                        <DataGridTextColumn Header="位置比例" Binding="{Binding LocationRatio, StringFormat=P2}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            
            <!-- 成交额明细标签页 -->
            <TabItem Header="成交额明细">
                <DataGrid x:Name="dgVolumeData" 
                          AutoGenerateColumns="False" 
                          IsReadOnly="True"
                          CanUserResizeRows="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="日期" Binding="{Binding Date, StringFormat=yyyy-MM-dd}" Width="100"/>
                        <DataGridTextColumn Header="成交额" Binding="{Binding QuoteVolume, StringFormat=F2}" Width="120"/>
                        <DataGridTextColumn Header="成交量" Binding="{Binding Volume, StringFormat=F2}" Width="100"/>
                        <DataGridTextColumn Header="均价" Binding="{Binding AveragePrice, StringFormat=F8}" Width="100"/>
                        <DataGridTextColumn Header="相对倍数" Binding="{Binding RelativeMultiplier, StringFormat=F2}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            
            <!-- 成交额统计标签页 -->
            <TabItem Header="成交额统计">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- 统计摘要 -->
                    <GroupBox Grid.Row="0" Header="统计摘要" Margin="0,0,0,10">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="10">
                                <TextBlock Text="前N天成交额均值" FontWeight="Bold"/>
                                <TextBlock x:Name="txtAverageVolume" Text="0.00" FontSize="14"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10">
                                <TextBlock Text="最新成交额" FontWeight="Bold"/>
                                <TextBlock x:Name="txtCurrentVolume" Text="0.00" FontSize="14"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Margin="10">
                                <TextBlock Text="倍数" FontWeight="Bold"/>
                                <TextBlock x:Name="txtMultiplier" Text="0.00" FontSize="14" Foreground="Red"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>
                    
                    <!-- 成交额趋势图 -->
                    <GroupBox Grid.Row="1" Header="成交额趋势" Margin="0,0,0,10">
                        <Canvas x:Name="canvasVolumeChart" Height="200" Background="WhiteSmoke"/>
                    </GroupBox>
                    
                    <!-- 详细数据 -->
                    <GroupBox Grid.Row="2" Header="详细数据">
                        <DataGrid x:Name="dgVolumeStats" 
                                  AutoGenerateColumns="False" 
                                  IsReadOnly="True"
                                  CanUserResizeRows="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  GridLinesVisibility="Horizontal"
                                  HeadersVisibility="Column">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="日期" Binding="{Binding Date, StringFormat=yyyy-MM-dd}" Width="100"/>
                                <DataGridTextColumn Header="成交额" Binding="{Binding QuoteVolume, StringFormat=F2}" Width="120"/>
                                <DataGridTextColumn Header="与均值比较" Binding="{Binding Comparison, StringFormat=F2}" Width="100"/>
                                <DataGridTextColumn Header="倍数" Binding="{Binding Multiplier, StringFormat=F2}" Width="80"/>
                                <DataGridTextColumn Header="状态" Binding="{Binding Status}" Width="80"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>
        
        <!-- 底部按钮 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="btnExport" Content="导出数据" Width="100" Height="30" Margin="0,0,10,0" Click="BtnExport_Click"/>
            <Button x:Name="btnClose" Content="关闭" Width="80" Height="30" Click="BtnClose_Click"/>
        </StackPanel>
    </Grid>
</Window> 