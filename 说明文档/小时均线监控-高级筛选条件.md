# å°æ—¶å‡çº¿ç›‘æŽ§ - é«˜çº§ç­›é€‰æ¡ä»¶

## ä¿®æ”¹æ—¥æœŸ
2025-11-07

## åŠŸèƒ½æ¦‚è¿°
ä¸ºå°æ—¶å‡çº¿ç›‘æŽ§å¢žåŠ äº†é«˜çº§ç­›é€‰æ¡ä»¶ï¼Œæ”¯æŒå¯¹24Hæˆäº¤é¢ã€é‡æ¯”ã€æµé€šçŽ‡ç­‰é¢å¤–æ•°æ®è¿›è¡Œå¤šæ¡ä»¶ç»„åˆç­›é€‰ï¼Œå¸®åŠ©ç”¨æˆ·æ›´ç²¾å‡†åœ°ç­›é€‰ç›®æ ‡åˆçº¦ã€‚

## æ–°å¢žç­›é€‰æ¡ä»¶

### ç­›é€‰å­—æ®µè¯´æ˜Ž

| ç­›é€‰æ¡ä»¶ | ç±»åž‹ | è¯´æ˜Ž | ç¤ºä¾‹ |
|---------|------|------|------|
| **å¤§äºŽEMAæ•°é‡ â‰¥** | æ•´æ•° | è¿žç»­å¤§äºŽEMAçš„Kçº¿æ•°é‡ï¼ˆåŽŸæœ‰ï¼‰ | 5 |
| **å°äºŽEMAæ•°é‡ â‰¥** | æ•´æ•° | è¿žç»­å°äºŽEMAçš„Kçº¿æ•°é‡ï¼ˆåŽŸæœ‰ï¼‰ | 3 |
| **æˆäº¤é¢(USDT) â‰¥** | æ•°å€¼ | 24å°æ—¶æˆäº¤é¢æœ€å°å€¼ | 1000000ï¼ˆ100ä¸‡USDTï¼‰ |
| **é‡æ¯”(%) â‰¥** | ç™¾åˆ†æ¯” | é‡æ¯”æœ€å°å€¼ | 50ï¼ˆè¡¨ç¤º50%ï¼‰ |
| **æµé€šçŽ‡(%) â‰¤** | ç™¾åˆ†æ¯” | æµé€šçŽ‡æœ€å¤§å€¼ | 80ï¼ˆè¡¨ç¤º80%ï¼‰ |

### ç­›é€‰é€»è¾‘

**å¤šæ¡ä»¶ç»„åˆ**ï¼š
- æ‰€æœ‰æ¡ä»¶ä¹‹é—´ä¸º **AND** å…³ç³»
- åªæœ‰åŒæ—¶æ»¡è¶³æ‰€æœ‰è¾“å…¥æ¡ä»¶çš„åˆçº¦æ‰ä¼šè¢«ç­›é€‰å‡ºæ¥
- è‡³å°‘éœ€è¦è¾“å…¥ä¸€ä¸ªç­›é€‰æ¡ä»¶
- æœªå¡«å†™çš„æ¡ä»¶å°†è¢«å¿½ç•¥

**ç­›é€‰æµç¨‹**ï¼š
```
èŽ·å–Kçº¿æ•°æ®
    â†“
è®¡ç®—EMAå’Œè¿žç»­æ•°é‡
    â†“
åº”ç”¨EMAç›¸å…³ç­›é€‰ï¼ˆæœåŠ¡ç«¯ï¼‰
    â†“
è¡¥å……é¢å¤–æ•°æ®ï¼ˆæˆäº¤é¢ã€é‡æ¯”ã€æµé€šçŽ‡ï¼‰
    â†“
åº”ç”¨é¢å¤–æ•°æ®ç­›é€‰ï¼ˆå®¢æˆ·ç«¯ï¼‰
    â†“
æ˜¾ç¤ºç­›é€‰ç»“æžœ
```

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç­›é€‰é«˜æˆäº¤é‡åˆçº¦
**ç›®æ ‡**ï¼šæ‰¾å‡ºæˆäº¤é¢è¶…è¿‡500ä¸‡USDTçš„åˆçº¦

**è¾“å…¥**ï¼š
- æˆäº¤é¢(USDT) â‰¥ `5000000`

**ç»“æžœ**ï¼šæ˜¾ç¤ºæ‰€æœ‰24Hæˆäº¤é¢â‰¥500ä¸‡USDTçš„åˆçº¦

### ç¤ºä¾‹2ï¼šç­›é€‰é«˜é‡æ¯”ä½Žæµé€šåˆçº¦
**ç›®æ ‡**ï¼šæ‰¾å‡ºé‡æ¯”é«˜ä¸”æµé€šçŽ‡ä½Žçš„æ½œåŠ›åˆçº¦

**è¾“å…¥**ï¼š
- é‡æ¯”(%) â‰¥ `30`
- æµé€šçŽ‡(%) â‰¤ `60`

**ç»“æžœ**ï¼šæ˜¾ç¤ºé‡æ¯”â‰¥30%ä¸”æµé€šçŽ‡â‰¤60%çš„åˆçº¦

### ç¤ºä¾‹3ï¼šç»¼åˆç­›é€‰
**ç›®æ ‡**ï¼šè¿žç»­ä¸Šæ¶¨ä¸”æˆäº¤æ´»è·ƒçš„é«˜è´¨é‡åˆçº¦

**è¾“å…¥**ï¼š
- å¤§äºŽEMAæ•°é‡ â‰¥ `5`
- æˆäº¤é¢(USDT) â‰¥ `10000000`
- é‡æ¯”(%) â‰¥ `50`
- æµé€šçŽ‡(%) â‰¤ `70`

**ç»“æžœ**ï¼šæ˜¾ç¤ºåŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„åˆçº¦ï¼š
- è¿žç»­5æ ¹ä»¥ä¸ŠKçº¿æ”¶ç›˜ä»·å¤§äºŽEMA
- 24Hæˆäº¤é¢è¶…è¿‡1000ä¸‡USDT
- é‡æ¯”è¶…è¿‡50%
- æµé€šçŽ‡ä¸è¶…è¿‡70%

## UIå¸ƒå±€

### ç­›é€‰æ¡ä»¶åŒºåŸŸï¼ˆä¸¤è¡Œå¸ƒå±€ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­›é€‰æ¡ä»¶ï¼š                                                    â”‚
â”‚                                                               â”‚
â”‚ å¤§äºŽEMAæ•°é‡â‰¥[  ] å°äºŽEMAæ•°é‡â‰¥[  ] æˆäº¤é¢(USDT)â‰¥[      ]      â”‚
â”‚ é‡æ¯”(%)â‰¥[  ] æµé€šçŽ‡(%)â‰¤[  ]                                 â”‚
â”‚                                                               â”‚
â”‚ [ðŸ” ç­›é€‰] [æ¸…é™¤ç­›é€‰] â˜‘ ç›‘æŽ§æ—¶è‡ªåŠ¨åº”ç”¨ç­›é€‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¬¬ä¸€è¡Œ**ï¼šæ‰€æœ‰ç­›é€‰è¾“å…¥æ¡†
**ç¬¬äºŒè¡Œ**ï¼šæ“ä½œæŒ‰é’®å’Œé€‰é¡¹

## æŠ€æœ¯å®žçŽ°

### 1. æ•°æ®æ¨¡åž‹æ‰©å±•

**æ–‡ä»¶**: `src/BinanceApps.Core/Models/HourlyEmaModels.cs`

```csharp
public class HourlyEmaFilter
{
    // åŽŸæœ‰å­—æ®µ
    public int? MinAboveEmaCount { get; set; }
    public int? MinBelowEmaCount { get; set; }
    
    // æ–°å¢žå­—æ®µ
    public decimal? MinQuoteVolume { get; set; }        // æœ€å°24Hæˆäº¤é¢
    public decimal? MinVolumeRatio { get; set; }        // æœ€å°é‡æ¯”(%)
    public decimal? MaxCirculationRate { get; set; }    // æœ€å¤§æµé€šçŽ‡(%)
}
```

### 2. UIç•Œé¢ä¿®æ”¹

**æ–‡ä»¶**: `src/BinanceApps.WPF/HourlyEmaMonitorWindow.xaml`

**ä¿®æ”¹å†…å®¹**ï¼š
- å°†ç­›é€‰æ¡ä»¶åŒºåŸŸæ”¹ä¸ºGridå¸ƒå±€ï¼ˆ2è¡Œï¼‰
- ç¬¬ä¸€è¡Œï¼šæ·»åŠ 3ä¸ªæ–°ç­›é€‰è¾“å…¥æ¡†
- ç¬¬äºŒè¡Œï¼šä¿æŒåŽŸæœ‰æŒ‰é’®å’Œé€‰é¡¹

### 3. ç­›é€‰é€»è¾‘å®žçŽ°

**æ–‡ä»¶**: `src/BinanceApps.WPF/HourlyEmaMonitorWindow.xaml.cs`

#### è¾“å…¥è§£æžï¼ˆBtnFilter_Clickï¼‰
```csharp
// è§£æžæœ€å°æˆäº¤é¢
if (!string.IsNullOrWhiteSpace(txtMinQuoteVolume.Text))
{
    if (decimal.TryParse(txtMinQuoteVolume.Text, out var minQuoteVolume) && minQuoteVolume > 0)
    {
        filter.MinQuoteVolume = minQuoteVolume;
        hasFilter = true;
    }
}

// è§£æžæœ€å°é‡æ¯”
if (!string.IsNullOrWhiteSpace(txtMinVolumeRatio.Text))
{
    if (decimal.TryParse(txtMinVolumeRatio.Text, out var minVolumeRatio) && minVolumeRatio > 0)
    {
        filter.MinVolumeRatio = minVolumeRatio;
        hasFilter = true;
    }
}

// è§£æžæœ€å¤§æµé€šçŽ‡
if (!string.IsNullOrWhiteSpace(txtMaxCirculationRate.Text))
{
    if (decimal.TryParse(txtMaxCirculationRate.Text, out var maxCirculationRate) 
        && maxCirculationRate > 0 && maxCirculationRate <= 100)
    {
        filter.MaxCirculationRate = maxCirculationRate;
        hasFilter = true;
    }
}
```

#### ä¸¤é˜¶æ®µç­›é€‰ï¼ˆRefreshMonitorResultsAsyncï¼‰
```csharp
private async Task RefreshMonitorResultsAsync(HourlyEmaFilter? filter = null)
{
    // é˜¶æ®µ1ï¼šæœåŠ¡ç«¯ç­›é€‰ï¼ˆEMAç›¸å…³ï¼‰
    var baseFilter = new HourlyEmaFilter
    {
        MinAboveEmaCount = filter?.MinAboveEmaCount,
        MinBelowEmaCount = filter?.MinBelowEmaCount
    };
    var results = await _hourlyEmaService.GetMonitorResultsAsync(baseFilter);
    
    // é˜¶æ®µ2ï¼šè¡¥å……é¢å¤–æ•°æ®
    await EnrichResultsWithAdditionalDataAsync(results);
    
    // é˜¶æ®µ3ï¼šå®¢æˆ·ç«¯ç­›é€‰ï¼ˆé¢å¤–æ•°æ®ï¼‰
    if (filter != null)
    {
        results = ApplyClientSideFilter(results, filter);
    }
    
    _currentResults = results;
    dgResults.ItemsSource = _currentResults;
}
```

#### å®¢æˆ·ç«¯ç­›é€‰ï¼ˆApplyClientSideFilterï¼‰
```csharp
private List<HourlyEmaMonitorResult> ApplyClientSideFilter(
    List<HourlyEmaMonitorResult> results, 
    HourlyEmaFilter filter)
{
    var filtered = results.AsEnumerable();
    
    // ç­›é€‰æˆäº¤é¢
    if (filter.MinQuoteVolume.HasValue)
    {
        filtered = filtered.Where(r => r.QuoteVolume24h >= filter.MinQuoteVolume.Value);
    }
    
    // ç­›é€‰é‡æ¯”
    if (filter.MinVolumeRatio.HasValue)
    {
        filtered = filtered.Where(r => r.VolumeRatio >= filter.MinVolumeRatio.Value);
    }
    
    // ç­›é€‰æµé€šçŽ‡
    if (filter.MaxCirculationRate.HasValue)
    {
        filtered = filtered.Where(r => r.CirculationRate <= filter.MaxCirculationRate.Value);
    }
    
    return filtered.ToList();
}
```

## ç­›é€‰ç­–ç•¥

### ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸¤é˜¶æ®µç­›é€‰ï¼Ÿ

**åŽŸå› **ï¼š
1. **EMAæ•°æ®åœ¨æœåŠ¡ç«¯**ï¼šå¤§äºŽ/å°äºŽEMAæ•°é‡åœ¨Kçº¿æ•°æ®åŠ è½½æ—¶å·²è®¡ç®—
2. **é¢å¤–æ•°æ®åœ¨å®¢æˆ·ç«¯**ï¼š24Hæˆäº¤é¢ã€é‡æ¯”ã€æµé€šçŽ‡éœ€è¦å®žæ—¶èŽ·å–å¹¶è®¡ç®—
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå…ˆåœ¨æœåŠ¡ç«¯è¿‡æ»¤å‡å°‘æ•°æ®é‡ï¼Œå†åœ¨å®¢æˆ·ç«¯ç²¾ç»†ç­›é€‰

**æµç¨‹**ï¼š
```
æœåŠ¡ç«¯ç­›é€‰ï¼ˆå¿«é€Ÿï¼‰
    â†“ (å‡å°‘æ•°æ®é‡)
æ•°æ®è¡¥å……ï¼ˆè€—æ—¶ï¼‰
    â†“ (åªå¤„ç†å¿…è¦æ•°æ®)
å®¢æˆ·ç«¯ç­›é€‰ï¼ˆç²¾ç¡®ï¼‰
    â†“
æœ€ç»ˆç»“æžœ
```

## è¾“å…¥éªŒè¯

### éªŒè¯è§„åˆ™

| å­—æ®µ | éªŒè¯è§„åˆ™ | é”™è¯¯æç¤º |
|------|----------|----------|
| å¤§äºŽEMAæ•°é‡ | å¤§äºŽ0çš„æ•´æ•° | "è¯·è¾“å…¥æœ‰æ•ˆçš„å¤§äºŽEMAæ•°é‡ï¼ˆå¤§äºŽ0çš„æ•´æ•°ï¼‰" |
| å°äºŽEMAæ•°é‡ | å¤§äºŽ0çš„æ•´æ•° | "è¯·è¾“å…¥æœ‰æ•ˆçš„å°äºŽEMAæ•°é‡ï¼ˆå¤§äºŽ0çš„æ•´æ•°ï¼‰" |
| æˆäº¤é¢ | å¤§äºŽ0çš„æ•°å€¼ | "è¯·è¾“å…¥æœ‰æ•ˆçš„æœ€å°æˆäº¤é¢ï¼ˆå¤§äºŽ0çš„æ•°å€¼ï¼‰" |
| é‡æ¯” | å¤§äºŽ0çš„æ•°å€¼ | "è¯·è¾“å…¥æœ‰æ•ˆçš„æœ€å°é‡æ¯”ï¼ˆå¤§äºŽ0çš„æ•°å€¼ï¼Œå•ä½ï¼š%ï¼‰" |
| æµé€šçŽ‡ | 0-100ä¹‹é—´çš„æ•°å€¼ | "è¯·è¾“å…¥æœ‰æ•ˆçš„æœ€å¤§æµé€šçŽ‡ï¼ˆ0-100ä¹‹é—´çš„æ•°å€¼ï¼Œå•ä½ï¼š%ï¼‰" |
| ä»»æ„æ¡ä»¶ | è‡³å°‘è¾“å…¥ä¸€ä¸ª | "è¯·è‡³å°‘è¾“å…¥ä¸€ä¸ªç­›é€‰æ¡ä»¶" |

## ä½¿ç”¨å»ºè®®

### ç­›é€‰ç­–ç•¥æŽ¨è

#### 1. é«˜æµåŠ¨æ€§åˆçº¦
```
æˆäº¤é¢(USDT) â‰¥ 10000000
é‡æ¯”(%) â‰¥ 50
```
**é€‚ç”¨åœºæ™¯**ï¼šå¯»æ‰¾äº¤æ˜“æ´»è·ƒã€æµåŠ¨æ€§å¥½çš„ä¸»æµåˆçº¦

#### 2. ä½Žæµé€šæ½œåŠ›å¸
```
æµé€šçŽ‡(%) â‰¤ 50
æˆäº¤é¢(USDT) â‰¥ 1000000
```
**é€‚ç”¨åœºæ™¯**ï¼šå¯»æ‰¾æµé€šç›˜å°ã€æœ‰æ½œåŠ›çš„é¡¹ç›®

#### 3. è¶‹åŠ¿çªç ´åˆçº¦
```
å¤§äºŽEMAæ•°é‡ â‰¥ 5
é‡æ¯”(%) â‰¥ 30
æˆäº¤é¢(USDT) â‰¥ 5000000
```
**é€‚ç”¨åœºæ™¯**ï¼šå¯»æ‰¾æŒç»­ä¸Šæ¶¨ä¸”æˆäº¤æ´»è·ƒçš„åˆçº¦

#### 4. è¶…ä½Žæµé€šé«˜æŽ§ç›˜
```
æµé€šçŽ‡(%) â‰¤ 30
æˆäº¤é¢(USDT) â‰¥ 2000000
```
**é€‚ç”¨åœºæ™¯**ï¼šå¯»æ‰¾é«˜åº¦æŽ§ç›˜ã€æµé€šæžä½Žçš„åˆçº¦ï¼ˆæ³¨æ„é£Žé™©ï¼‰

## æ³¨æ„äº‹é¡¹

### æ•°æ®ä¾èµ–

1. **æˆäº¤é¢æ•°æ®**ï¼šä¾èµ–å®žæ—¶Ticker APIï¼Œéœ€è¦ç½‘ç»œè¿žæŽ¥
2. **æµé€šé‡/å‘è¡Œæ€»é‡**ï¼šä¾èµ–ContractInfoServiceï¼Œéœ€è¦åŽç«¯APIè¿è¡Œ
3. **é‡æ¯”æ•°æ®**ï¼šä¾èµ–æˆäº¤é¢å’Œæµé€šé‡ï¼Œä¸¤è€…éƒ½éœ€è¦æ­£å¸¸èŽ·å–

### ç­›é€‰æ—¶æœº

**è‡ªåŠ¨åº”ç”¨ç­›é€‰**ï¼š
- âœ… å‹¾é€‰"ç›‘æŽ§æ—¶è‡ªåŠ¨åº”ç”¨ç­›é€‰"
- âœ… å¯åŠ¨ç›‘æŽ§åŽï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°éƒ½ä¼šåº”ç”¨ç­›é€‰æ¡ä»¶
- âœ… åªæ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„åˆçº¦

**æ‰‹åŠ¨ç­›é€‰**ï¼š
- ç‚¹å‡»"ç­›é€‰"æŒ‰é’®ç«‹å³åº”ç”¨
- ç‚¹å‡»"æ¸…é™¤ç­›é€‰"æ¢å¤æ˜¾ç¤ºå…¨éƒ¨åˆçº¦

### æ€§èƒ½è€ƒè™‘

- **æŽ¨èåˆçº¦æ•°é‡**ï¼š< 500ä¸ªï¼ˆé¦–æ¬¡èŽ·å–åŽï¼‰
- **ç­›é€‰æ€§èƒ½**ï¼šå®¢æˆ·ç«¯LINQç­›é€‰ï¼Œå‡ ä¹Žæ— å»¶è¿Ÿ
- **æ•°æ®è¡¥å……**ï¼šå¼‚æ­¥æ‰¹é‡å¤„ç†ï¼Œé€šå¸¸2-5ç§’

## å¸¸è§é—®é¢˜

### Q1ï¼šä¸ºä»€ä¹ˆç­›é€‰åŽæ•°é‡ä¸º0ï¼Ÿ
**A**ï¼šå¯èƒ½åŽŸå› ï¼š
1. ç­›é€‰æ¡ä»¶è¿‡äºŽä¸¥æ ¼ï¼Œæ²¡æœ‰åˆçº¦ç¬¦åˆ
2. ContractInfoServiceæœªè¿žæŽ¥ï¼Œé‡æ¯”å’Œæµé€šçŽ‡æ•°æ®ä¸º0
3. å»ºè®®é€ä¸ªæ¡ä»¶æµ‹è¯•ï¼Œæ‰¾å‡ºé—®é¢˜æ¡ä»¶

### Q2ï¼šé‡æ¯”å’Œæµé€šçŽ‡æ˜¾ç¤ºä¸º0ï¼Ÿ
**A**ï¼šæ£€æŸ¥ä»¥ä¸‹é¡¹ï¼š
1. ContractInfoServiceæ˜¯å¦æ­£å¸¸è¿žæŽ¥ï¼ˆhttp://localhost:8080ï¼‰
2. åˆçº¦ä¿¡æ¯APIæ˜¯å¦å·²åŠ è½½æ•°æ®
3. æŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ç¡®è®¤é”™è¯¯ä¿¡æ¯

### Q3ï¼šå¦‚ä½•ç»„åˆå¤šä¸ªæ¡ä»¶ï¼Ÿ
**A**ï¼š
- æ‰€æœ‰æ¡ä»¶éƒ½æ˜¯ANDå…³ç³»
- å»ºè®®å…ˆä½¿ç”¨å•ä¸ªæ¡ä»¶æµ‹è¯•ï¼Œå†é€æ­¥æ·»åŠ å…¶ä»–æ¡ä»¶
- å¯ä»¥ä¿å­˜å¸¸ç”¨ç»„åˆåˆ°æ–‡æœ¬å¤‡å¿˜

## ç‰ˆæœ¬ä¿¡æ¯

- **åŠŸèƒ½ç‰ˆæœ¬**: v1.3.0
- **ä¿®æ”¹æ—¥æœŸ**: 2025-11-07
- **å¼€å‘è€…**: AI Assistant
- **çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶ç¼–è¯‘æˆåŠŸ

## ç›¸å…³æ–‡æ¡£

- [å°æ—¶å‡çº¿ç›‘æŽ§-åŠŸèƒ½è¯´æ˜Ž](./å°æ—¶å‡çº¿ç›‘æŽ§-åŠŸèƒ½è¯´æ˜Ž.md)
- [å°æ—¶å‡çº¿ç›‘æŽ§-æ–°å¢žæ•°æ®åˆ—å’Œæˆäº¤é¢å‰¯å›¾](./å°æ—¶å‡çº¿ç›‘æŽ§-æ–°å¢žæ•°æ®åˆ—å’Œæˆäº¤é¢å‰¯å›¾.md)
- [å°æ—¶å‡çº¿ç›‘æŽ§-æ™ºèƒ½ç›‘æŽ§å®žçŽ°](./å°æ—¶å‡çº¿ç›‘æŽ§-æ™ºèƒ½ç›‘æŽ§å®žçŽ°.md)

