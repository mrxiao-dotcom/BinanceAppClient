# 小时均线监控 - 快速开始指南

## 🚀 一分钟快速开始

### 第1步：清理并编译（30秒）

在项目根目录执行：

```powershell
powershell -ExecutionPolicy Bypass -File clean-build.ps1
```

### 第2步：运行应用（10秒）

```bash
cd src\BinanceApps.WPF
dotnet run --configuration Release
```

### 第3步：使用功能（20秒）

1. 点击左侧"⏱️ 小时均线监控"按钮
2. 保持默认参数（N=26, X=100）
3. 点击"📥 获取小时K线"按钮
4. 等待数据获取完成
5. 点击"▶️ 启动监控"开始监控

完成！🎉

---

## 📋 详细步骤

### 准备工作

确保已安装：
- ✅ .NET 9.0 SDK 或更高版本
- ✅ Visual Studio 2022 或 VS Code（可选）
- ✅ PowerShell（Windows自带）

检查 .NET 版本：
```bash
dotnet --version
```

### 步骤1：清理旧的编译文件

**为什么要清理？**
- 解决编译器缓存问题
- 确保使用最新的代码
- 避免类型找不到的错误

**执行清理：**
```powershell
# 在项目根目录（D:\CSharpProjects\BinanceAppsClient）执行
powershell -ExecutionPolicy Bypass -File clean-build.ps1
```

**预期输出：**
```
========================================
  清理并重新编译 BinanceApps 项目
========================================

[1/6] 清理解决方案...
✅ 清理完成

[2/6] 删除 bin 和 obj 目录...
✅ 已删除 N 个目录

[3/6] 恢复 NuGet 包...
✅ NuGet 包恢复成功

[4/6] 编译 BinanceApps.Core...
✅ Core 项目编译成功

[5/6] 编译 BinanceApps.WPF...
✅ WPF 项目编译成功

[6/6] 编译完成！

========================================
  ✅ 所有项目编译成功！
========================================
```

**耗时：** 约30-60秒

### 步骤2：运行应用程序

```bash
cd src\BinanceApps.WPF
dotnet run --configuration Release
```

**预期效果：**
- 应用程序窗口打开
- 左侧导航栏显示所有功能按钮
- 包括新增的"⏱️ 小时均线监控"按钮

**耗时：** 约5-10秒

### 步骤3：打开小时均线监控窗口

1. 在主窗口左侧找到"⏱️ 小时均线监控"按钮
2. 点击按钮
3. 新窗口打开，标题为"小时均线监控"

**预期窗口内容：**
- 顶部：4个控制按钮
- 右侧：2个参数输入框
- 中间：数据表格
- 底部：状态栏

### 步骤4：获取K线数据

1. **检查参数**（可选修改）
   - N天均线：26（默认）
   - X根K线：100（默认）

2. **点击"📥 获取小时K线"按钮**

3. **观察进度**
   - 按钮变为"获取中..."
   - 状态栏显示"正在获取小时K线数据..."
   - 进度信息实时更新（例如："进度: 50/200 (25%) - BTCUSDT"）
   - 日志会显示是使用本地缓存还是重新下载

4. **等待完成**
   - 自动计算EMA
   - 数据表格自动填充
   - 状态栏显示"数据准备完成"
   - 弹出成功提示框

**耗时：**
- 首次使用（无缓存）：约2-5分钟（取决于合约数量和网络速度）
- 后续使用（有缓存）：约10-30秒 ⚡（性能提升10-30倍！）
- 与量比异动选股配合使用：几乎瞬间完成 ⚡⚡

**💡 性能提示：**
- 本功能与量比异动选股共享K线数据缓存
- 如果之前使用过量比异动选股，本功能会直接使用缓存数据
- 建议先使用量比异动选股，再使用本功能，可获得最佳性能

### 步骤5：启动监控

1. **点击"▶️ 启动监控"按钮**

2. **观察状态变化**
   - "启动监控"按钮禁用
   - "停止监控"按钮启用
   - "获取小时K线"按钮禁用
   - 参数输入框禁用
   - 状态栏显示"监控中... (每5分钟更新一次)"

3. **自动更新**
   - 系统每5分钟自动刷新数据
   - 表格数据实时更新
   - 更新时间列显示最新时间

### 步骤6：查看结果

**表格列说明：**
- **合约名**：交易对名称（如 BTCUSDT）
- **最新价格**：当前市场价格
- **当前EMA**：EMA均线值
- **距离EMA(%)**：价格距离均线的百分比
  - 红色：价格高于均线（正值）
  - 绿色：价格低于均线（负值）
- **24H涨幅(%)**：24小时涨跌幅
  - 红色：上涨
  - 绿色：下跌
- **K线数量**：缓存的K线数据数量
- **更新时间**：最后更新时间

**双击功能：**
- 双击任意行，合约名自动复制到剪贴板

---

## 🎯 快速测试场景

### 场景1：查看价格接近均线的合约

1. 获取数据后，查看"距离EMA(%)"列
2. 找到绝对值小于3%的合约
3. 这些合约价格接近均线，可能是入场机会

### 场景2：监控趋势强势合约

1. 启动监控
2. 观察"距离EMA(%)"为正且较大的合约
3. 这些合约价格远高于均线，趋势强势

### 场景3：寻找回调机会

1. 筛选24H涨幅为正的合约
2. 查看其距离EMA的百分比
3. 距离较大的可能面临回调

---

## ⚠️ 常见问题快速解决

### 问题1：编译时提示找不到类型

**解决：** 执行清理脚本
```powershell
powershell -ExecutionPolicy Bypass -File clean-build.ps1
```

### 问题2：获取数据时无响应

**检查：**
1. API设置是否正确
2. 网络连接是否正常
3. 是否使用模拟数据模式

**解决：**
- 检查主窗口的"API设置"
- 确认能够获取其他数据

### 问题3：表格显示为空

**原因：** 可能没有可交易的合约

**解决：**
1. 检查 API 设置
2. 确认网络连接
3. 查看控制台输出的错误信息

### 问题4：监控按钮无法点击

**原因：** 需要先获取数据

**解决：**
1. 点击"获取小时K线"按钮
2. 等待数据获取完成
3. "启动监控"按钮会自动启用

---

## 📊 使用技巧

### 技巧1：调整EMA周期

不同的EMA周期适合不同的策略：
- **短周期（5-10）**：适合短线交易，反应灵敏
- **中周期（20-30）**：适合波段交易，平衡灵敏和稳定
- **长周期（50-100）**：适合长线持仓，过滤噪音

### 技巧2：合理设置K线数量

- **最小值**：至少等于EMA周期
- **推荐值**：EMA周期的3-5倍
- **最大值**：根据需要设置，但会增加获取时间

### 技巧3：结合其他指标

小时均线监控可以配合使用：
- 量比异动选股（找异动品种）
- 均线距离分析（找回调机会）
- 涨速排行榜（找强势品种）

---

## 📖 延伸阅读

- **完整功能说明**：`小时均线监控功能说明.md`
- **详细测试指南**：`小时均线监控-测试指南.md`
- **技术架构说明**：`小时均线监控-集成摘要.md`
- **编译问题解决**：`小时均线监控-编译指南.md`

---

## ✅ 检查清单

使用前确认：
- [ ] 已执行清理脚本
- [ ] 编译无错误
- [ ] 应用程序能正常启动
- [ ] 能看到"小时均线监控"按钮

使用时确认：
- [ ] 窗口能正常打开
- [ ] 参数设置合理（X ≥ N）
- [ ] 能正常获取数据
- [ ] 表格显示正常
- [ ] 监控功能正常

---

**祝你交易顺利！** 📈💰

如有问题，请参考详细文档或检查控制台输出的错误信息。

