# 仪表板双击复制合约功能说明

## 📋 功能概述

为综合信息仪表板的以下区域添加了双击复制合约符号的功能：

1. **24H涨幅TOP10** - 最大涨幅合约列表
2. **24H跌幅TOP10** - 最大跌幅合约列表
3. **量比最大TOP20** - 量比排行榜

## ✨ 功能特性

### 1. 鼠标悬停效果

当鼠标悬停在合约名称上时：
- ✅ 鼠标指针变为**手型**（表示可点击）
- ✅ 文本显示**下划线**
- ✅ 量比排行中，文本颜色变为**蓝色**（`#0078D4`）

### 2. 双击复制功能

双击合约名称时：
- ✅ 自动复制合约符号到**系统剪贴板**
- ✅ 文本颜色临时变为**绿色**（`#00C800`）作为视觉反馈
- ✅ **1秒后**自动恢复原来的颜色
- ✅ 控制台输出日志：`已复制合约符号到剪贴板: BTCUSDT`

### 3. 复制内容

复制到剪贴板的是**纯合约符号**，例如：
- `BTCUSDT`
- `ETHUSDT`
- `BNBUSDT`

**不包含**：
- 表情符号（📈、📉）
- 涨跌幅百分比
- 排名数字
- 其他辅助文本

## 🎯 使用方法

### 步骤1：打开仪表板
点击左侧菜单的 **📊 综合信息仪表板**

### 步骤2：找到目标合约
在以下区域找到您想复制的合约：
- **📊 24小时市场动态** 区域
  - 24H涨幅TOP10
  - 24H跌幅TOP10
- **📊 量比最大TOP20** 区域

### 步骤3：鼠标悬停
将鼠标悬停在合约名称上，会看到：
- 🖱️ 鼠标变为手型
- 下划线出现

### 步骤4：双击复制
快速双击合约名称：
- ✅ 合约符号自动复制到剪贴板
- ✅ 文本闪烁绿色（1秒）

### 步骤5：粘贴使用
在任何地方按 `Ctrl+V` 粘贴合约符号

## 💡 使用场景

### 场景1：快速查看合约详情
1. 双击仪表板中的涨幅TOP1合约（如 `BTCUSDT`）
2. 切换到K线分析页面
3. `Ctrl+V` 粘贴合约符号
4. 查看详细K线图和技术指标

### 场景2：批量收藏关注合约
1. 双击仪表板中的多个感兴趣合约
2. 在自定义组合中添加这些合约
3. 建立个性化监控列表

### 场景3：导出到外部工具
1. 双击仪表板中的量比TOP合约
2. 粘贴到Excel、TradingView等外部工具
3. 进行进一步分析

### 场景4：快速分享
1. 双击某个高涨幅合约
2. 粘贴到IM工具（微信、QQ、Telegram）
3. 分享给团队或朋友

## 🔧 技术实现

### 修改文件
`src/BinanceApps.WPF/DashboardWindow.xaml.cs`

### 关键代码片段

#### 1. 添加交互属性
```csharp
var symbolText = new TextBlock
{
    Text = item.Symbol,
    Cursor = System.Windows.Input.Cursors.Hand,  // 手型光标
    Tag = item.Symbol  // 保存Symbol用于复制
};
```

#### 2. 鼠标悬停效果
```csharp
symbolText.MouseEnter += (s, e) => 
{
    symbolText.TextDecorations = TextDecorations.Underline;
    symbolText.Foreground = new SolidColorBrush(Color.FromRgb(0, 120, 212));
};
symbolText.MouseLeave += (s, e) => 
{
    symbolText.TextDecorations = null;
    symbolText.Foreground = new SolidColorBrush(Colors.Black);
};
```

#### 3. 双击复制事件
```csharp
private void ContractText_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (e.ClickCount == 2 && sender is TextBlock textBlock)
    {
        var symbol = textBlock.Tag?.ToString();
        if (!string.IsNullOrEmpty(symbol))
        {
            // 复制到剪贴板
            System.Windows.Clipboard.SetText(symbol);
            
            // 视觉反馈：临时改变颜色
            var originalForeground = textBlock.Foreground;
            textBlock.Foreground = new SolidColorBrush(Color.FromRgb(0, 200, 0));
            
            // 1秒后恢复
            var timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(1) };
            timer.Tick += (s, args) =>
            {
                textBlock.Foreground = originalForeground;
                timer.Stop();
            };
            timer.Start();
        }
    }
}
```

## 🎨 UI变化

### 修改前：
```
📈 BTCUSDT: +15.23%
📉 ETHUSDT: -5.67%
1. BNBUSDT 0.0125% ...
```
- 普通文本
- 无法交互
- 需要手动选择复制

### 修改后：
```
📈 BTCUSDT: +15.23%  ← 悬停显示下划线，双击复制
📉 ETHUSDT: -5.67%   ← 悬停显示下划线，双击复制
1. BNBUSDT 0.0125%   ← 悬停变蓝+下划线，双击复制
   ^^^^^^^^
   可点击区域
```
- 手型光标
- 悬停下划线
- 双击复制
- 绿色闪烁反馈

## 📊 影响范围

### 修改的UI组件
1. **24H涨幅TOP10** - `panelTopGainers`
2. **24H跌幅TOP10** - `panelTopLosers`
3. **量比最大TOP20** - `panelVolumeRatio`

### 不影响的功能
- ❌ 不影响数据计算
- ❌ 不影响数据刷新
- ❌ 不影响其他UI元素
- ❌ 不影响性能

## ✅ 测试步骤

1. **编译最新版本**（已完成）：
   ```bash
   dotnet build src/BinanceApps.WPF/BinanceApps.WPF.csproj
   ```

2. **运行程序**：
   ```bash
   .\src\BinanceApps.WPF\bin\Debug\net9.0-windows\BinanceApps.WPF.exe
   ```

3. **打开仪表板**：
   点击左侧菜单的 **📊 综合信息仪表板**

4. **测试鼠标悬停**：
   - 移动鼠标到合约名称上
   - ✅ 应该看到手型光标
   - ✅ 应该看到下划线
   - ✅ 量比排行应该看到文本变蓝

5. **测试双击复制**：
   - 双击任意合约名称
   - ✅ 应该看到文本闪烁绿色
   - ✅ 控制台输出：`已复制合约符号到剪贴板: XXXUSDT`
   - ✅ 在任意文本编辑器粘贴，应该显示纯合约符号

6. **测试多次复制**：
   - 连续双击不同的合约
   - ✅ 每次都应该成功复制
   - ✅ 剪贴板应该更新为最新的符号

## 🚀 后续优化建议

### 可选增强（未实现）：

1. **单击高亮**：单击时高亮该行，方便识别当前选中项
2. **右键菜单**：右键显示更多选项（复制、查看详情、添加到组合等）
3. **拖拽功能**：拖拽合约到自定义组合区域
4. **Ctrl+单击批量复制**：选中多个合约，一次性复制所有符号
5. **复制格式选项**：可选择复制格式（纯符号、带涨跌幅、JSON格式等）

## 📝 版本信息

- **功能添加日期**：2025年10月3日
- **功能版本**：v2.3.2
- **修改文件**：`src/BinanceApps.WPF/DashboardWindow.xaml.cs`
- **功能类型**：UI交互增强
- **影响范围**：综合信息仪表板
- **兼容性**：完全向后兼容，不影响现有功能

